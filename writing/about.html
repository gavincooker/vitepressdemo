<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>qa | vitepress demo doc</title>
    <meta name="description" content="Just playing around.">
    <link rel="stylesheet" href="/vitepressdemo/assets/style.6b89da3e.css">
    <link rel="modulepreload" href="/vitepressdemo/assets/chunks/VPAlgoliaSearchBox.1bfb8271.js">
    <link rel="modulepreload" href="/vitepressdemo/assets/app.90aac30d.js">
    <link rel="modulepreload" href="/vitepressdemo/assets/writing_about.md.11907350.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-7968fce8><!--[--><!--]--><!--[--><span tabindex="-1" data-v-4b30a361></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-4b30a361> Skip to content </a><!--]--><!----><header class="VPNav no-sidebar" data-v-7968fce8 data-v-1a09babd><div class="VPNavBar" data-v-1a09babd data-v-ef2b1d59><div class="container" data-v-ef2b1d59><div class="VPNavBarTitle" data-v-ef2b1d59 data-v-41a15f1d><a class="title" href="/vitepressdemo/" data-v-41a15f1d><!--[--><!--]--><!--[--><img class="VPImage logo" src="/vitepressdemo/logo2.png" data-v-98ace6fe><!--]--><!--[-->vitepress demo doc<!--]--><!--[--><!--]--></a></div><div class="content" data-v-ef2b1d59><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ef2b1d59 style="--35749622:&#39;Meta&#39;;"><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ef2b1d59 data-v-6e1ed29c><span id="main-nav-aria-label" class="visually-hidden" data-v-6e1ed29c>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepressdemo/" data-v-6e1ed29c data-v-315cb0e0 data-v-d6e4aabd><!--[-->首页<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepressdemo/components/button.html" data-v-6e1ed29c data-v-315cb0e0 data-v-d6e4aabd><!--[-->组件<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/vitepressdemo/writing/about.html" data-v-6e1ed29c data-v-315cb0e0 data-v-d6e4aabd><!--[-->关于<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://github.com/vuejs/vitepress" target="_blank" rel="noreferrer" data-v-6e1ed29c data-v-315cb0e0 data-v-d6e4aabd><!--[-->GitHub<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ef2b1d59 data-v-fbe0243a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-fbe0243a data-v-d99326a4 data-v-d3c6697f><span class="check" data-v-d3c6697f><span class="icon" data-v-d3c6697f><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-d99326a4><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-d99326a4><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-ef2b1d59 data-v-a8f1fc7b data-v-acbb4e2a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-acbb4e2a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-acbb4e2a><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-acbb4e2a><div class="VPMenu" data-v-acbb4e2a data-v-0ffcffa2><!----><!--[--><!--[--><!----><div class="group" data-v-a8f1fc7b><div class="item appearance" data-v-a8f1fc7b><p class="label" data-v-a8f1fc7b>Appearance</p><div class="appearance-action" data-v-a8f1fc7b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-a8f1fc7b data-v-d99326a4 data-v-d3c6697f><span class="check" data-v-d3c6697f><span class="icon" data-v-d3c6697f><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-d99326a4><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-d99326a4><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ef2b1d59 data-v-fbb51b51><span class="container" data-v-fbb51b51><span class="top" data-v-fbb51b51></span><span class="middle" data-v-fbb51b51></span><span class="bottom" data-v-fbb51b51></span></span></button></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-7968fce8 data-v-f7019310><div class="VPDoc has-aside" data-v-f7019310 data-v-19ee5b94><div class="container" data-v-19ee5b94><div class="aside" data-v-19ee5b94><div class="aside-curtain" data-v-19ee5b94></div><div class="aside-container" data-v-19ee5b94><div class="aside-content" data-v-19ee5b94><div class="VPDocAside" data-v-19ee5b94 data-v-1995add8><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-1995add8 data-v-a3d16f03><div class="content" data-v-a3d16f03><div class="outline-marker" data-v-a3d16f03></div><div class="outline-title" data-v-a3d16f03>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-a3d16f03><span class="visually-hidden" id="doc-outline-aria-label" data-v-a3d16f03> Table of Contents for current page </span><ul class="root" data-v-a3d16f03><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-1995add8></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-19ee5b94><div class="content-container" data-v-19ee5b94><!--[--><!--]--><main class="main" data-v-19ee5b94><div style="position:relative;" class="vp-doc _vitepressdemo_writing_about" data-v-19ee5b94><div><h1 id="qa" tabindex="-1">qa <a class="header-anchor" href="#qa" aria-hidden="true">#</a></h1><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">vitepress是什么?</span></span>
<span class="line"><span style="color:#A6ACCD;">	静态网站生成器</span></span>
<span class="line"><span style="color:#A6ACCD;">vitepress特点/为何使用？</span></span>
<span class="line"><span style="color:#A6ACCD;">	使用md文件来编写、组织文档，文档路由易配置，提供默认网站主题，起网站迅速。可通过在md文件中使用vue组件，来编写组件库文档。</span></span>
<span class="line"><span style="color:#A6ACCD;">vitepress迅速原因？</span></span>
<span class="line"><span style="color:#A6ACCD;">	vitepress在vite基础上搭建</span></span>
<span class="line"><span style="color:#A6ACCD;">vite特点？</span></span>
<span class="line"><span style="color:#A6ACCD;">	启动快，根据请求按需加载模块。区别于webpack。vite的server模块提供该逻辑。</span></span>
<span class="line"><span style="color:#A6ACCD;">	vite提供hook以供外部配置plugin、server</span></span>
<span class="line"><span style="color:#A6ACCD;">vite与vitepress间的联动？</span></span>
<span class="line"><span style="color:#A6ACCD;">	vite有自身的plugin，vitepress提供自身的plugin给vite统一配置。在plugin中可以通过提供的约定方法hook，提供配置server、配置server中间件、转换不同格式的模块、提供网站入口页面等功能。</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h1 id="vitepressdemo-项目总览" tabindex="-1">vitepressdemo 项目总览 <a class="header-anchor" href="#vitepressdemo-项目总览" aria-hidden="true">#</a></h1><h3 id="项目技术栈" tabindex="-1">项目技术栈 <a class="header-anchor" href="#项目技术栈" aria-hidden="true">#</a></h3><p><img src="/vitepressdemo/assets/vitepresscompose.1d45781d.png" alt="An image"></p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    vite + vue + md</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="项目结构" tabindex="-1">项目结构 <a class="header-anchor" href="#项目结构" aria-hidden="true">#</a></h3><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">docs</span></span>
<span class="line"><span style="color:#A6ACCD;">    .vitepress</span></span>
<span class="line"><span style="color:#A6ACCD;">        config.ts(vitepress site config)</span></span>
<span class="line"><span style="color:#A6ACCD;">        config dir</span></span>
<span class="line"><span style="color:#A6ACCD;">            md router map</span></span>
<span class="line"><span style="color:#A6ACCD;">            md plugin</span></span>
<span class="line"><span style="color:#A6ACCD;">        theme</span></span>
<span class="line"><span style="color:#A6ACCD;">    public(assets)</span></span>
<span class="line"><span style="color:#A6ACCD;">    write、docs/components(customize)</span></span>
<span class="line"><span style="color:#A6ACCD;">        md file</span></span>
<span class="line"><span style="color:#A6ACCD;">packages</span></span>
<span class="line"><span style="color:#A6ACCD;">    components source code</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="项目心得：" tabindex="-1">项目心得： <a class="header-anchor" href="#项目心得：" aria-hidden="true">#</a></h3><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">1. 通过vitepress提供的初始化hook，全局注册Demo组件、自定义组件</span></span>
<span class="line"><span style="color:#A6ACCD;">2. 执行vite.config.js，访问到md时，使用文件名作为id检索example文件夹下id路径下的vue文件，并通过script标签存到demos变量`。（此时修改了md源文件并未做解析）</span></span>
<span class="line"><span style="color:#A6ACCD;">3. 执行vitepress config.js，通过提供的markdown hook，使用markdown-it解析md。（此时对md做了解析并最终修改了源文件）</span></span>
<span class="line"><span style="color:#A6ACCD;">解析过程： 当md存在demo容器变量名时，检查渲染tokens，将demo容器块内部的text提取为source file path，通过fs访问example文件夹下对应路径下源文件，字符串存至source变量</span></span>
<span class="line"><span style="color:#A6ACCD;">4. 在md渲染时机，注入字符串，内容为`Demo组件注入source和变量demos`</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h1 id="vitepress-源码心得" tabindex="-1">vitepress 源码心得: <a class="header-anchor" href="#vitepress-源码心得" aria-hidden="true">#</a></h1><h3 id="dev-环境" tabindex="-1">dev 环境 <a class="header-anchor" href="#dev-环境" aria-hidden="true">#</a></h3><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">vitepress是在vite基础搭建的，在vite plugin基础上添加vitepress plugin.</span></span>
<span class="line"><span style="color:#A6ACCD;">1. 读取vitepress userconfig、sitedata等config配置项，使用vite提供的dev-server创建http server，并挂载vitepress plugin</span></span>
<span class="line"><span style="color:#A6ACCD;">2. vitepress plugin内处理md类型文件，配置server提供入口html，其中引入client/app/index.js</span></span>
<span class="line"><span style="color:#A6ACCD;">3. vite提供转换功能，将用户项目文件中涉及到相对路径的url转为/@fs/开头的绝对路径，以期望通过http访问, 最终由http server处理.</span></span>
<span class="line"><span style="color:#A6ACCD;">4. request handler中，经由vite:resolve plugin transform处理/@fs/路径url，并读取路径下的文件内容&lt;string&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">5. 源文件中的引用经由vite:import-analysis plugin transform, 过程中对路径加/@fs/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="server-流程" tabindex="-1">server 流程 <a class="header-anchor" href="#server-流程" aria-hidden="true">#</a></h3><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">启动server流程：</span></span>
<span class="line"><span style="color:#A6ACCD;">	vitepress解析config配置后，提供viterpess plugin介入vite的plugin处理流程，最终通过node/http模块提供http server服务器供dev调试。</span></span>
<span class="line"><span style="color:#A6ACCD;">server serve流程：</span></span>
<span class="line"><span style="color:#A6ACCD;">	请求/, 返回index.html，内联js文件，再次发起http req get请求。</span></span>
<span class="line"><span style="color:#A6ACCD;">	middleware处理请求req</span></span>
<span class="line"><span style="color:#A6ACCD;">	req请求经过vite middleware，对req url做转换，</span></span>
<span class="line"><span style="color:#A6ACCD;">	resolve req url得到url，得到绝对路径path</span></span>
<span class="line"><span style="color:#A6ACCD;">	load module( 转换vue、md文件，node read file)</span></span>
<span class="line"><span style="color:#A6ACCD;">	transform:</span></span>
<span class="line"><span style="color:#A6ACCD;">	处理对文件路径引用的处理, 通过vite:import-analysis的transform将源文件中的/@fs/路径转为实际绝对路径, 通过vite:alias处理别名</span></span>
<span class="line"><span style="color:#A6ACCD;">	以上action通过vite、vitepress的plugin同名方法处理。</span></span>
<span class="line"><span style="color:#A6ACCD;">	最终返回转换后的源文件code中的外部引用url都以/@fs/开头</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="vite-plugin" tabindex="-1">vite plugin <a class="header-anchor" href="#vite-plugin" aria-hidden="true">#</a></h3><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">vite:import-analysis</span></span>
<span class="line"><span style="color:#A6ACCD;">    transform method将路径转为/@fs/开头的实际文件路径, 重写源文件</span></span>
<span class="line"><span style="color:#A6ACCD;">vite:resolve</span></span>
<span class="line"><span style="color:#A6ACCD;">    resolve method分解/@fs/开头的路径;处理相对路径为绝对路径</span></span>
<span class="line"><span style="color:#A6ACCD;">vite:pre-alias：</span></span>
<span class="line"><span style="color:#A6ACCD;">    resolve method处理别名为实际文件路径</span></span>
<span class="line"><span style="color:#A6ACCD;">vite:optimized-deps:</span></span>
<span class="line"><span style="color:#A6ACCD;">    load deps file</span></span>
<span class="line"><span style="color:#A6ACCD;">vitepress plugin:</span></span>
<span class="line"><span style="color:#A6ACCD;">    转换vue、md文件为js文件；配置http server服务器的middleware，返回初始的入口页面</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="vite-middleware-handle-request-url-progression-step" tabindex="-1">vite middleware handle request url progression step <a class="header-anchor" href="#vite-middleware-handle-request-url-progression-step" aria-hidden="true">#</a></h3><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">1. resolve req url</span></span>
<span class="line"><span style="color:#A6ACCD;">2. load source file</span></span>
<span class="line"><span style="color:#A6ACCD;">3. transform source file</span></span>
<span class="line"><span style="color:#A6ACCD;">    3.1 resolve imports id to urls</span></span>
<span class="line"><span style="color:#A6ACCD;">    3.2 rewritten import path by resolve url</span></span>
<span class="line"><span style="color:#A6ACCD;">    3.3 set http request about resolve url</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="resolve-url-example" tabindex="-1">resolve url example <a class="header-anchor" href="#resolve-url-example" aria-hidden="true">#</a></h3><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&quot;/node_modules/.vite/deps/vue.js?v=23be0ae3&quot;(vue)</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;/@fs/C:/Users/EDZ/Desktop/vitepress/dist/client/theme-default/index.js&quot;(&quot;@theme/index&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;/@fs/C:/Users/EDZ/Desktop/vitepress/dist/client/app/utils.js&quot;(&quot;./utils.js&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;/@fs/C:/Users/EDZ/Desktop/vitepress/dist/client/app/router.js&quot;(&quot;./router.js&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;/@fs/C:/Users/EDZ/Desktop/vitepress/dist/client/app/data.js&quot;(&quot;./data.js&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">&quot;/@fs/C:/Users/EDZ/Desktop/vitepress/dist/client/app/composables/head.js&quot;(&quot;./composables/head.js&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h1 id="github-page-部署心得：" tabindex="-1">github page 部署心得： <a class="header-anchor" href="#github-page-部署心得：" aria-hidden="true">#</a></h1><h3 id="创建-github-同名仓库-repo" tabindex="-1">创建 github 同名仓库[repo] <a class="header-anchor" href="#创建-github-同名仓库-repo" aria-hidden="true">#</a></h3><p>形如<code>[name]/github.io</code>。 name 为 github username，每个账户仅有一个，用作 github page 个人域名。 该仓库文件可通过<code>[name]/github.io/</code>url 访问, 一般不存放。转为为每个仓库做部署.</p><h3 id="每一个仓库拥有在线访问地址" tabindex="-1">每一个仓库拥有在线访问地址 <a class="header-anchor" href="#每一个仓库拥有在线访问地址" aria-hidden="true">#</a></h3><p>访问<code>[name]/github.io/账户下的仓库名</code></p><h3 id="repo-setting-为仓库设置访问分支" tabindex="-1">repo-&gt;setting 为仓库设置访问分支 <a class="header-anchor" href="#repo-setting-为仓库设置访问分支" aria-hidden="true">#</a></h3><p>deploy branch 设置提供 server 的 branch，存放构建完的 dist 目录文件</p><h3 id="vitepress-中正式环境设置-baseurl-为仓库名" tabindex="-1">vitepress 中正式环境设置 baseurl 为仓库名 <a class="header-anchor" href="#vitepress-中正式环境设置-baseurl-为仓库名" aria-hidden="true">#</a></h3><p>否则<code>[name]/github.io/账户下的仓库名</code>只访问到 index html, 访问不到包括样式等静态资源。</p><h3 id="自动部署" tabindex="-1">自动部署 <a class="header-anchor" href="#自动部署" aria-hidden="true">#</a></h3><p>通过官方提供的 github workflow 脚本实现, 提交更改后执行部署。</p><h3 id="项目心得（22-9-16）：" tabindex="-1">项目心得（22.9.16）： <a class="header-anchor" href="#项目心得（22-9-16）：" aria-hidden="true">#</a></h3><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">	alias</span></span>
<span class="line"><span style="color:#A6ACCD;">@theme/index -&gt; c:// theme/index.js</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span></span>
<span class="line"><span style="color:#A6ACCD;">handle request:</span></span>
<span class="line"><span style="color:#A6ACCD;">	resolve:</span></span>
<span class="line"><span style="color:#A6ACCD;">		/@fs/c://client/app/index.js -&gt; c://client/app/index.js</span></span>
<span class="line"><span style="color:#A6ACCD;">	load:</span></span>
<span class="line"><span style="color:#A6ACCD;">		read file</span></span>
<span class="line"><span style="color:#A6ACCD;">	transform:</span></span>
<span class="line"><span style="color:#A6ACCD;">		transform import [url] to /@fs/[url] or node_modules/[url]</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span></span>
<span class="line"><span style="color:#A6ACCD;">		vue </span></span>
<span class="line"><span style="color:#A6ACCD;">		-&gt; </span></span>
<span class="line"><span style="color:#A6ACCD;">		&quot;/node_modules/.vite/deps/vue.js?v=23be0ae3&quot;(url/module map id)</span></span>
<span class="line"><span style="color:#A6ACCD;">		&quot;C:/Users/EDZ/Desktop/vitepress/docs/node_modules/.vite/deps/vue.js?v=23be0ae3&quot;(resolveId)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span></span>
<span class="line"><span style="color:#A6ACCD;">		@theme/index</span></span>
<span class="line"><span style="color:#A6ACCD;">		-&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		&quot;/@fs/C:/Users/EDZ/Desktop/vitepress/dist/client/theme-default/index.js&quot;(url/ module map id)</span></span>
<span class="line"><span style="color:#A6ACCD;">		&quot;C:/Users/EDZ/Desktop/vitepress/dist/client/theme-default/index.js&quot; (resolveId)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span></span>
<span class="line"><span style="color:#A6ACCD;">		./util.js</span></span>
<span class="line"><span style="color:#A6ACCD;">		-&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		&quot;/@fs/C:/Users/EDZ/Desktop/vitepress/dist/client/app/utils.js&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">		&quot;C:/Users/EDZ/Desktop/vitepress/dist/client/app/utils.js&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span></span>
<span class="line"><span style="color:#A6ACCD;">alias plugin:</span></span>
<span class="line"><span style="color:#A6ACCD;">	使用自定义的别名plugin（如有），处理别名，根据别名获取实际的文件路径</span></span>
<span class="line"><span style="color:#A6ACCD;">import plugin：</span></span>
<span class="line"><span style="color:#A6ACCD;">	转换源文件内的import文件路径，对存在的import的fs文件路径前面加上，转为合法的url（/@fs/或/node_modules/)以发起合法的request；</span></span>
<span class="line"><span style="color:#A6ACCD;">resolve plugin:</span></span>
<span class="line"><span style="color:#A6ACCD;">	处理/@fs/或.开头的相对路径</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span></span>
<span class="line"><span style="color:#A6ACCD;">一个request对应一个入口文件，解析入口url的同时，会对入口源文件内所有的路径引入，做与入口文件相同的resolve、load、transform步骤。</span></span>
<span class="line"><span style="color:#A6ACCD;">当入口文件资源全部load完全时，执行客户端ui的逻辑，根据路径url找到对应的md文档，并发起http请求http://localhost:5173/index.md?import&amp;t=1663325460567 ，访问入口页文档</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div></div></div></main><!--[--><!--]--><!----><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"components_button.md\":\"7001449a\",\"components_dialog.md\":\"a9f82499\",\"index.md\":\"f89063ea\",\"writing_about.md\":\"11907350\"}")</script>
    <script type="module" async src="/vitepressdemo/assets/app.90aac30d.js"></script>
    
  </body>
</html>